---
layout: article
tags: SQL
description: 常用函数
---
## SQL

#### 时间转字符串

```sql
select now();
```

<!--more-->

> 结果：2018-06-26 21:29:50

```sql
select date_format(now(), '%Y-%m-%d %H:%i:%s');
```

> 结果：2018-06-26 21:28:36

#### 时间戳转字符串

```sql
select from_unixtime(1530020032);
```

> 结果：2018-06-26 21:33:52

```sql
select from_unixtime(1530020032,'%Y-%d');
```

> 结果：2018-26

#### 字符串转时间

```sql
select str_to_date('2018-06-26', '%Y-%m-%d %H');
```

> 结果：2018-06-26 00:00:00.000000000

#### 转时间戳

```sql
select unix_timestamp(now()); # 时间转时间戳
```

> 结果：1530020400

```sql
select unix_timestamp('2018-06-26'); #字符串转时间戳
```

> 结果：1529942400

#### 常用函数

- year()
- month()

#### 常用SQL

```sql
show columns from table_name;    # 显示表结构
```

#### 类型问题

- **char(n)** 存放定长n，输入字符不足时在其后补充空字值。
- **varchar(n)** 存放可变长度n且非 Unicode 的字符数据 ，n是介于1和8000之间的数值。
- **nvarchar(n)** 存放可变长度n且 Unicode 字符数据。n 的值必须介于 1 与 4,000 之间。 

`一般来说，如果含有中文字符，用nchar/nvarchar，如果纯英文和数字，用char/varchar。 `

## DATABASE

#### SQL定义

- 数据查询 Data Query(DQL)
- 数据操纵 Data Manipulation(DML)
- 数据定义 Data Definition (DDL)
- 数据控制 Data Control(DCL)

#### SQL特点

1. 综合统一
2. 高度非过程化
3. 面向集合的操作方式
4. 以同一种语法结构提供两种使用方式
5. 语言简洁，易学易用

#### 删除模式

- CASCADE **级联**（删除模式的同时把该模式中所有的数据库对象全部删除）
- RESTRICT **限制**（Ø如果该模式中定义了下属的数据库对象（如表、视图等），则拒绝该删除语句的执行，Ø当该模式中没有任何下属的对象时才能执行 ）